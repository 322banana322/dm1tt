#include <iostream>
using namespace std;
template<typename T>

class Mass
{
private:
	T* arr;
	int size;
public:
	Mass(int arrSize) {

		if (size < 0)
		{
			throw out_of_range("Index error");
		}

		size = arrSize;
		arr = T int[size];

		if (!arr)
		{
			throw bad_alloc();
		}

		for (int i = 0; i < size; i++) {
			arr[i] = i;
		}
	}
	~Mass() {
		delete arr;
	}

	Mass(Mass& Copy) {

		size = Copy.size;
		arr = new T[size];

		if (size < 0)
		{
			throw out_of_range("Index error");
		}

		if (!arr)
		{
			throw bad_alloc();
		}

		for (int i = 0; i < size; i++) {
			arr[i] = Copy.arr[i];
		}
	}

	void print() {
		for (int i = 0; i < size; i++) {
			cout << arr[i] << " ";
		}
		cout << endl;
	}


	
	void setArr(int i, T val) {

		if (typeid(T) == typeid(int))
		{
			if (val > 100 || val < -100)
			{
				throw invalid_argument("value outside the range -100..100");
			}
		}

			if (i >= size || i < 0)
			{
				throw invalid_argument("size outside the range -100..100");
			}
		

			else arr[i] = val;	
	}

	int getArr(int i) {

		if (i >= size || i < 0)
		{
			throw out_of_range("Index error");
		}
		else
		{
			return arr[i];
		}
	}

	void Addition(Mass& Copy) {

		if (typeid(T) == typeid(int))
		{
			for (int i = 0; i < size; i++) {
				arr[i] = arr[i] + Copy.arr[i];
			}
		}

	}

	void Substruction(Mass& Copy) {

		if (typeid(T) == typeid(int))
		{
			for (int i = 0; i < size; i++) {

				arr[i] = arr[i] - Copy.arr[i];
			}
		}
	}

	void Dobavznach(T val) {

		if (val > -100 or val < 100) {

			size = size + 1;
			T* newArr = new T[size];
			for (int i = 0; i < size - 1; i++) {

				newArr[i] = arr[i];
			}
			delete arr;
			newArr[size - 1] = val;
			arr = newArr;
		}
	}

	double Distance(Mass& Other)
	{
		double dist = 0;

		if (typeid(T) == typeid(int))
		{
			for (int i = 0; i < size; i++) {
				dist = (toP(arr[i]) - toT(Other.arr[i])) * (toT(arr[i]) - toT(Other.arr[i])) + dist;
			}
		}
		
		return sqrt(dist);
	}

};

template<typename T>
ostream& operator << (ostream& gg, Mass <T>& array)
{
	for (int i = 0; i < 3; i++)
	{
		gg << i << " - " << array.GetVal(i) << endl;
	}
	return gg;
}


int main()
{
	int size = 0, i = 0;

	Mass a(5);
	try
	{
		Mass<int> arr(3);
		arr.SetVal(0, 2);
	}

	catch (out_of_range exception)
	{
		cout << "An exception was thrown " << exception.what() << endl;
	}
	catch (bad_alloc exception) {
		cout << "An exception was thrown " << exception.what() << endl;
	}
	catch (invalid_argument exception) {
		cout << "An exception was thrown " << exception.what() << endl;
	}

	a.print();

	a.setArr(i, 1);

	a.getArr(i);

	Mass Copy(a);

	Copy.print();

	a.Addition(Copy);

	a.print();

	a.Substruction(Copy);

	try
	{
		q.Distance(5);
	}
	catch (logic_error exception)
	{
		cout << "An exception was thrown " << exception.what() << endl;
	}


	a.print();

	a.Dobavznach(16);

	a.print();

}
